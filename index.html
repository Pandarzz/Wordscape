<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8">
        <title>Wordscape &#8226; Home</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Favicon source: https://iconmonstr.com/book-17-png/ -->
        <link rel="icon" href="./assets/images/favicon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.25/css/uikit.min.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="./assets/css/reset.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="./assets/css/style.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <form id="input">
            <label for="term-input">Search term:</label>
            <input type="text" id="term-input">
            <input id="add-definition" type="submit"
            value="Search" class="search">
        </form>
        <div id="definition"></div>
        <button id="save-term" class="save">Save</button>
        <!-- PRONUNCIATION div goes here -->
        <div>
            <h1>Pronunciation</h1>
            <!-- Div to show pronunciation stuff -->
            <div id="pronunciations">
                <!-- Part of speech -->
                <!-- Written pronunciation -->
                <!-- Audio controls -->
            </div>
        </div>
        
        <script type="text/javascript">
            var storageInfoG= [];
            var wordG=[];
            // var individualDefs=[];
            // var word;
            function displaySearchTerm(){
            
                
                var word= $("#term-input").val().trim();
                console.log(word);
                var key= "?key=1f40dde8-50d6-4eb6-9168-6f465c469eb9";
                
                var queryUrl= "http://www.dictionaryapi.com/api/v3/references/collegiate/json/";
            $("#definition").empty();
            
            $.ajax({
                url: queryUrl + word + key,
                method:"GET"
            }).then(function(response){
                var results= response;
            for (var i=0; i<results.length; i++) {
                console.log(response[i]);
                var term= response[i].shortdef[0]; //word definition
                
            if (response[i].fl===("noun")){
    
                
                storageInfoG.push(term);
                wordG.push(word);
                // localStorage.clear();
            
                var termDiv = $("<div>");
                var p= $("<p>");
                p.text(word + ": " + term);
    
                termDiv.append(p);
                $("#definition").append(termDiv);
    
    
                var input = $("#term-input").val("");
    
            //     for (var i=0; i<results.length; i++) {
                
            //     individualDefs.push(word + ": " + term);
    
            // }
    
            };        
    
            
            
    
            
            }
            });
            
            }
            $(".save").on("click", function(event){
    
                localStorage.setItem(wordG , JSON.stringify([storageInfoG]));
                // localStorage.setItem("Terms: " , JSON.stringify(storageInfoG));
                
             }); //end of click listener
               
    
            // here
    
            $(".search").on("click", function(event){
               
                event.preventDefault();
    
                var word= $("#term-input").val().trim();
    
                displaySearchTerm();
    
            });
    
            // $(document).on("click", ".search", displaySearchTerm);
            </script>
        </body>
    </html>